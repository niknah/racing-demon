var cardsScript=document.currentScript;!function(t,a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):t.cards=a(t.jQuery)}(this,function(d){"use strict";var t,o={options:{spacing:.2,radius:400,flow:"horizontal",fanDirection:"N",imagesUrl:"cards/"},cid:function(t){t=t.attr("src");return t.substring(t.length-6,t.length-4)},play:function(t){0<t.parents(".active-hand").length&&this.playCard(t)},remove:function(t){var a=t.parent();t.remove(),a.hasClass("fan")&&this.fan(a)},getOptions:function(t,a){var n=d.extend({},this.options);return d.extend(n,r(t,a))},fan:function(t,a){var n=this.getOptions(t,"fan");e(t,(n=a?d.extend(n,a):n).cards),this.applyFan(t,n)},applyFan:function(t,a){var e,r,n,i,o,s,t=t.find("img.card");0!==t.length&&(a.width&&t.width(a.width),r=this,a=a,0!==(t=(e=t).length))&&(o=a.width||e[0].clientWidth||70,n=e[0].clientHeight||Math.floor(1.4*o),i={},t=function(t,a,n,e,r,i,o){var s,d=Math.radiansToDegrees(Math.atan(n*i/a)),c={N:270,S:90,E:0,W:180}[r]-.5*d*(t-1),h=[],l=99999,p=99999,f=-l,u=-p;for(s=0;s<t;s++){var g=c+d*s,m=Math.degreesToRadians(g),M=n/2+Math.cos(m)*a,m=e/2+Math.sin(m)*a;l=Math.min(l,M),p=Math.min(p,m),f=Math.max(f,M),u=Math.max(u,m),h.push({x:M,y:m,angle:90+g})}var i=Math.getRotatedDimensions(h[0].angle,n,e),y=0,v=0;"N"===r?(y=-1*l,y+=(i[0]-n)/2,v=-1*p):"S"===r?(y=-1*l,y+=(i[0]-n)/2,v=-1*(p+(u-p))):"W"===r?(v=-1*p,v+=(i[1]-e)/2,y=-1*l,y+=e-Math.rotatePointInBox(0,0,270,n,e)[1]):"E"===r&&(v=-1*p,v+=(i[1]-e)/2,y=-1*a,y-=e-Math.rotatePointInBox(0,0,270,n,e)[1]);return h.forEach(function(t){t.x+=y,t.x=Math.round(t.x),t.y+=v,t.y=Math.round(t.y),t.angle=Math.round(t.angle)}),o.width=h[t-1].x+n,o.height=h[t-1].y+e,h}(t,a.radius,o,n,a.fanDirection,a.spacing,i),(o=d(e[0]).parent()).width(i.width),o.height(i.height),s=0,t.forEach(function(t){var a=e[s++],n=(a.style.left=t.x+"px",a.style.top=t.y+"px",a.onmouseover=function(){r.cardSetTop(a,t.y-10)},a.onmouseout=function(){r.cardSetTop(a,t.y)},Math.round(t.angle));["Webkit","Moz","O","ms"].forEach(function(t){a.style[t+"Transform"]="rotate("+n+"deg) translateZ(0)"})}))},hand:function(t,a){var n=this.getOptions(t,"hand");a&&(n=d.extend(n,a)),t.removeClass("hhand fan hhand vhand vhand-compact hhand-compact"),"vertical"===n.flow&&1<=n.spacing?t.addClass("vhand"):"horizontal"===n.flow&&1<=n.spacing?t.addClass("hhand"):"vertical"===n.flow?t.addClass("vhand-compact"):t.addClass("hhand-compact"),e(t,n.cards),this.applyHand(t,n)},applyHand:function(t,a){var n,e,r,t=t.find("img.card");0!==t.length&&(a.width&&t.width(a.width),n=a.width||t[0].clientWidth||70,e=t[0].clientHeight||Math.floor(1.4*n),(r=t.slice(0,1)).css("margin-top",""),r.css("margin-left",""),r=t.slice(1),"vertical"===a.flow&&a.spacing<1?(r.css("margin-top",-e*(1-a.spacing)),r.css("margin-left",0)):"horizontal"===a.flow&&a.spacing<1&&(r.css("margin-left",-n*(1-a.spacing)),r.css("margin-top",0)))},applyStyles:function(t){var a=d.extend({},this.options);t.hasClass("fan")?(a=d.extend(a,r(t,"fan")),this.applyFan(t,a)):(a=d.extend(a,r(t,"hand")),this.applyHand(t,a))},cardSetTop:function(t,a){t.style.top=a+"px"},cardNames:function(t){var a,n,e=[];for("string"==typeof t&&(t=t.split(" ")),a=0;a<t.length;++a)t[a]&&(n=t[a].toString().toUpperCase(),e.push(n));return e},getCardCodeFromElement(t){return t.getAttribute("data-card-code")},replaceCardImages(t,a){return e(t,a=a||d.extend({},this.options).cards)},addCardImages(t,a){a=n(t,a=a||d.extend({},this.options).cards);return this.applyStyles(t),a},clearCardStyles(t){for(const a of["position","margin-top","margin-left","transform","translateZ","left","top"])t.style.removeProperty(a)}};function e(t,a){if(a)return t.empty(),n(t,a)}function n(t,a){if(a){a=o.cardNames(a);for(var n=[],e=0;e<a.length;++e){var r=a[e],i=document.createElement("img");i.draggable=!1,i.className="card card-code-"+r,i.src=o.options.imagesUrl+r+".svg",i.setAttribute("data-card-code",r),t.append(i),n.push(i)}return n}}function r(t,a){for(var n,e,r={},i=t.data(a),o=0,s=(i=(i||"").replace(/\s/g,"").split(";")).length;o<s;o++)(n=(e=i[o].split(":"))[1])&&0<=n.indexOf(",")?r[e[0]]=n.split(","):r[e[0]]=Number(n)||n;return r}return o.playCard=o.remove,d(window).on("load",function(){d(".fan:not([data-bind])").each(function(){o.fan(d(this))}),d(".hand[data-hand]").each(function(){o.hand(d(this))}),d(".hand").on("click","img.card",function(){o.play(d(this))})}),cardsScript&&cardsScript.src&&(t=cardsScript.src.substring(0,cardsScript.src.lastIndexOf("/"))+"/cards/",o.options.imagesUrl=t),o}),Math.degreesToRadians||(Math.degreesToRadians=function(t){return t*(Math.PI/180)}),Math.radiansToDegrees||(Math.radiansToDegrees=function(t){return t*(180/Math.PI)}),Math.getRotatedDimensions||(Math.getRotatedDimensions=function(t,a,n){var t=t*Math.PI/180,e=Math.sin(t),t=Math.cos(t),r=t*a,i=e*a,o=-e*n,s=t*n,d=t*a-e*n,e=e*a+t*n,a=Math.min(0,r,o,d),t=Math.max(0,r,o,d),n=Math.min(0,i,s,e),r=Math.max(0,i,s,e);return[Math.floor(t-a),Math.floor(r-n)]}),Math.rotatePointInBox||(Math.rotatePointInBox=function(t,a,n,e,r){n=Math.degreesToRadians(n);var e=e/2,r=r/2,t=t-e,a=a-r,i=Math.sqrt(t*t+a*a),a=Math.atan2(a,t)+n;return[Math.cos(a)*i+e,Math.sin(a)*i+r]});